<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Package Development | Package Development in R for Predator Free New Zealand 2050</title>
  <meta name="description" content="This guide walks through the process of developing an R package" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Package Development | Package Development in R for Predator Free New Zealand 2050" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This guide walks through the process of developing an R package" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Package Development | Package Development in R for Predator Free New Zealand 2050" />
  
  <meta name="twitter:description" content="This guide walks through the process of developing an R package" />
  

<meta name="author" content="Anthony Davidson" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="version-control.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An R package development tutorial</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#table-of-contents"><i class="fa fa-check"></i>Table of Contents</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors-and-sources"><i class="fa fa-check"></i>Authors and Sources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="package-development.html"><a href="package-development.html"><i class="fa fa-check"></i><b>1</b> Package Development</a>
<ul>
<li class="chapter" data-level="1.1" data-path="package-development.html"><a href="package-development.html#file-paths"><i class="fa fa-check"></i><b>1.1</b> File Paths</a></li>
<li class="chapter" data-level="1.2" data-path="package-development.html"><a href="package-development.html#downloading-development-tools"><i class="fa fa-check"></i><b>1.2</b> Downloading Development Tools</a></li>
<li class="chapter" data-level="1.3" data-path="package-development.html"><a href="package-development.html#initializing-the-package"><i class="fa fa-check"></i><b>1.3</b> Initializing the Package</a></li>
<li class="chapter" data-level="1.4" data-path="package-development.html"><a href="package-development.html#the-description"><i class="fa fa-check"></i><b>1.4</b> The DESCRIPTION</a></li>
<li class="chapter" data-level="1.5" data-path="package-development.html"><a href="package-development.html#writing-code"><i class="fa fa-check"></i><b>1.5</b> Writing Code</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="package-development.html"><a href="package-development.html#general-coding-guidelines"><i class="fa fa-check"></i><b>1.5.1</b> General Coding Guidelines</a></li>
<li class="chapter" data-level="1.5.2" data-path="package-development.html"><a href="package-development.html#code-style"><i class="fa fa-check"></i><b>1.5.2</b> Code Style</a></li>
<li class="chapter" data-level="1.5.3" data-path="package-development.html"><a href="package-development.html#warnings-and-simplicity"><i class="fa fa-check"></i><b>1.5.3</b> Warnings and Simplicity</a></li>
<li class="chapter" data-level="1.5.4" data-path="package-development.html"><a href="package-development.html#loading-your-code"><i class="fa fa-check"></i><b>1.5.4</b> Loading Your Code</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="package-development.html"><a href="package-development.html#testing"><i class="fa fa-check"></i><b>1.6</b> Testing</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="package-development.html"><a href="package-development.html#why-should-you-test"><i class="fa fa-check"></i><b>1.6.1</b> Why should you test?</a></li>
<li class="chapter" data-level="1.6.2" data-path="package-development.html"><a href="package-development.html#what-are-unit-tests"><i class="fa fa-check"></i><b>1.6.2</b> What are unit tests?</a></li>
<li class="chapter" data-level="1.6.3" data-path="package-development.html"><a href="package-development.html#setting-up-the-testing-environment"><i class="fa fa-check"></i><b>1.6.3</b> Setting up the testing environment</a></li>
<li class="chapter" data-level="1.6.4" data-path="package-development.html"><a href="package-development.html#expectations"><i class="fa fa-check"></i><b>1.6.4</b> Expectations</a></li>
<li class="chapter" data-level="1.6.5" data-path="package-development.html"><a href="package-development.html#structure-and-location-of-unit-tests"><i class="fa fa-check"></i><b>1.6.5</b> Structure and Location of Unit Tests</a></li>
<li class="chapter" data-level="1.6.6" data-path="package-development.html"><a href="package-development.html#writing-good-tests"><i class="fa fa-check"></i><b>1.6.6</b> Writing Good Tests</a></li>
<li class="chapter" data-level="1.6.7" data-path="package-development.html"><a href="package-development.html#automated-checking"><i class="fa fa-check"></i><b>1.6.7</b> Automated Checking</a></li>
<li class="chapter" data-level="1.6.8" data-path="package-development.html"><a href="package-development.html#bonus-the-goodpractice-package"><i class="fa fa-check"></i><b>1.6.8</b> Bonus: The goodpractice Package</a></li>
<li class="chapter" data-level="1.6.9" data-path="package-development.html"><a href="package-development.html#tips-and-tricks"><i class="fa fa-check"></i><b>1.6.9</b> Tips and Tricks</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="package-development.html"><a href="package-development.html#documentation"><i class="fa fa-check"></i><b>1.7</b> Documentation</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="package-development.html"><a href="package-development.html#documenting-functions"><i class="fa fa-check"></i><b>1.7.1</b> Documenting Functions</a></li>
<li class="chapter" data-level="1.7.2" data-path="package-development.html"><a href="package-development.html#adding-a-readme"><i class="fa fa-check"></i><b>1.7.2</b> Adding a README</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="package-development.html"><a href="package-development.html#vignettes"><i class="fa fa-check"></i><b>1.8</b> Vignettes</a></li>
<li class="chapter" data-level="1.9" data-path="package-development.html"><a href="package-development.html#adding-and-documenting-data"><i class="fa fa-check"></i><b>1.9</b> Adding and Documenting Data</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="package-development.html"><a href="package-development.html#including-data-which-should-be-available-to-users"><i class="fa fa-check"></i><b>1.9.1</b> Including data which should be available to users</a></li>
<li class="chapter" data-level="1.9.2" data-path="package-development.html"><a href="package-development.html#including-data-for-your-functions"><i class="fa fa-check"></i><b>1.9.2</b> Including data for your functions</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="package-development.html"><a href="package-development.html#releasing-your-package"><i class="fa fa-check"></i><b>1.10</b> Releasing Your Package</a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="package-development.html"><a href="package-development.html#pushing-to-github"><i class="fa fa-check"></i><b>1.10.1</b> Pushing to GitHub</a></li>
<li class="chapter" data-level="1.10.2" data-path="package-development.html"><a href="package-development.html#cran"><i class="fa fa-check"></i><b>1.10.2</b> CRAN</a></li>
<li class="chapter" data-level="1.10.3" data-path="package-development.html"><a href="package-development.html#publicizing"><i class="fa fa-check"></i><b>1.10.3</b> Publicizing</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="package-development.html"><a href="package-development.html#tips-and-tricks-1"><i class="fa fa-check"></i><b>1.11</b> Tips and Tricks</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>2</b> Version Control</a>
<ul>
<li class="chapter" data-level="2.1" data-path="version-control.html"><a href="version-control.html#why-use-gitgithub"><i class="fa fa-check"></i><b>2.1</b> Why use Git/GitHub?</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="version-control.html"><a href="version-control.html#what-is-git"><i class="fa fa-check"></i><b>2.1.1</b> What is Git?</a></li>
<li class="chapter" data-level="2.1.2" data-path="version-control.html"><a href="version-control.html#what-is-github"><i class="fa fa-check"></i><b>2.1.2</b> What is GitHub?</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="version-control.html"><a href="version-control.html#setting-up-gitgithub"><i class="fa fa-check"></i><b>2.2</b> Setting up Git/GitHub</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="version-control.html"><a href="version-control.html#making-a-github-account"><i class="fa fa-check"></i><b>2.2.1</b> Making a GitHub account</a></li>
<li class="chapter" data-level="2.2.2" data-path="version-control.html"><a href="version-control.html#how-to-install-and-set-up-git"><i class="fa fa-check"></i><b>2.2.2</b> How to Install and Set Up Git</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="version-control.html"><a href="version-control.html#using-gitgithub"><i class="fa fa-check"></i><b>2.3</b> Using Git/GitHub</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="version-control.html"><a href="version-control.html#initializing-projects-and-repositories"><i class="fa fa-check"></i><b>2.3.1</b> Initializing Projects and Repositories</a></li>
<li class="chapter" data-level="2.3.2" data-path="version-control.html"><a href="version-control.html#modifying-projects"><i class="fa fa-check"></i><b>2.3.2</b> Modifying Projects</a></li>
<li class="chapter" data-level="2.3.3" data-path="version-control.html"><a href="version-control.html#accessing-older-versions-of-code"><i class="fa fa-check"></i><b>2.3.3</b> Accessing older versions of code</a></li>
<li class="chapter" data-level="2.3.4" data-path="version-control.html"><a href="version-control.html#the-.gitignore-file"><i class="fa fa-check"></i><b>2.3.4</b> The .gitignore file</a></li>
<li class="chapter" data-level="2.3.5" data-path="version-control.html"><a href="version-control.html#branching"><i class="fa fa-check"></i><b>2.3.5</b> Branching</a></li>
<li class="chapter" data-level="2.3.6" data-path="version-control.html"><a href="version-control.html#conflicts"><i class="fa fa-check"></i><b>2.3.6</b> Conflicts</a></li>
<li class="chapter" data-level="2.3.7" data-path="version-control.html"><a href="version-control.html#tips-and-tricks-2"><i class="fa fa-check"></i><b>2.3.7</b> Tips and Tricks</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="version-control.html"><a href="version-control.html#optional-integrated-testing"><i class="fa fa-check"></i><b>2.4</b> Optional: Integrated Testing</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="version-control.html"><a href="version-control.html#why-use-integrated-tests"><i class="fa fa-check"></i><b>2.4.1</b> Why use Integrated Tests?</a></li>
<li class="chapter" data-level="2.4.2" data-path="version-control.html"><a href="version-control.html#the-integrated-testing-workflow"><i class="fa fa-check"></i><b>2.4.2</b> The integrated testing workflow</a></li>
<li class="chapter" data-level="2.4.3" data-path="version-control.html"><a href="version-control.html#setting-up-integrated-tests"><i class="fa fa-check"></i><b>2.4.3</b> Setting up Integrated Tests</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="version-control.html"><a href="version-control.html#further-reading"><i class="fa fa-check"></i><b>2.5</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="integrated-development-environments.html"><a href="integrated-development-environments.html"><i class="fa fa-check"></i><b>3</b> Integrated Development Environments</a>
<ul>
<li class="chapter" data-level="3.1" data-path="integrated-development-environments.html"><a href="integrated-development-environments.html#general-suggestions"><i class="fa fa-check"></i><b>3.1</b> General Suggestions</a></li>
<li class="chapter" data-level="3.2" data-path="integrated-development-environments.html"><a href="integrated-development-environments.html#rstudio"><i class="fa fa-check"></i><b>3.2</b> RStudio</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="integrated-development-environments.html"><a href="integrated-development-environments.html#why-use-rstudio"><i class="fa fa-check"></i><b>3.2.1</b> Why use RStudio?</a></li>
<li class="chapter" data-level="3.2.2" data-path="integrated-development-environments.html"><a href="integrated-development-environments.html#getting-started"><i class="fa fa-check"></i><b>3.2.2</b> Getting Started</a></li>
<li class="chapter" data-level="3.2.3" data-path="integrated-development-environments.html"><a href="integrated-development-environments.html#ex-initializing-packages"><i class="fa fa-check"></i><b>3.2.3</b> Ex: Initializing Packages</a></li>
<li class="chapter" data-level="3.2.4" data-path="integrated-development-environments.html"><a href="integrated-development-environments.html#ex-building-packages"><i class="fa fa-check"></i><b>3.2.4</b> Ex: Building Packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>4</b> Resources</a>
<ul>
<li class="chapter" data-level="4.1" data-path="resources.html"><a href="resources.html#general"><i class="fa fa-check"></i><b>4.1</b> General</a></li>
<li class="chapter" data-level="4.2" data-path="resources.html"><a href="resources.html#package-development-1"><i class="fa fa-check"></i><b>4.2</b> Package Development</a></li>
<li class="chapter" data-level="4.3" data-path="resources.html"><a href="resources.html#version-control-1"><i class="fa fa-check"></i><b>4.3</b> Version Control</a></li>
<li class="chapter" data-level="4.4" data-path="resources.html"><a href="resources.html#ides"><i class="fa fa-check"></i><b>4.4</b> IDEs</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Package Development in R for Predator Free New Zealand 2050</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="package-development" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Package Development</h1>
<p>The following graphic outlines this entire chapter:</p>
<p><img src="images/package_workflow2.png" /></p>
<p>As a quick reminder, you can find the <code>devex</code> example package linked <a href="https://github.com/IQSS/Rbuild/tree/master/devex">here, on GitHub</a>, if you’d like to look through it while reading the guide.</p>
<div id="file-paths" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> File Paths</h2>
<p>The paths used to locate files differ between UNIX (e.g., MacOS, Linux) and Windows based operating systems. Windows systems used a single backslash <code>\</code>, while UNIX systems use a single forward slash <code>/</code> to delimit files or directories in the path. R follows the UNIX convention of using forward slashes, but forces this on Window’s users too. So, file paths should look like this:</p>
<ol style="list-style-type: decimal">
<li>MacOS and Linux</li>
</ol>
<p><code>~/Documents/myproject/myRfile.R</code></p>
<ol start="2" style="list-style-type: decimal">
<li>Windows</li>
</ol>
<p><code>C:/Documents/myproject/myRfile.R</code></p>
<p>In the examples provided in this guide, we will show MacOS file paths. If you’re using Windows, you will need to modify these paths slightly to show the drive letter at the beginning, followed by a colon.</p>
</div>
<div id="downloading-development-tools" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Downloading Development Tools</h2>
<p>Before we get started, you’ll want to download four packages that are extremely useful for package development. For Mac/Linux users, head to the R Gui (or your favorite IDE) and run the code below to download the packages. If you are prompted to choose a CRAN mirror for your session, simply pick the mirror closest to your location.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="package-development.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;devtools&#39;</span>)</span>
<span id="cb1-2"><a href="package-development.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;usethis&#39;</span>)</span>
<span id="cb1-3"><a href="package-development.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;roxygen2&#39;</span>)</span>
<span id="cb1-4"><a href="package-development.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;testthat&#39;</span>)</span></code></pre></div>
<p>If you are using Windows, prior to running the above code, you will need to install “RTools” by following these instructions:</p>
<ol style="list-style-type: decimal">
<li><p>Go to <a href="https://cran.rstudio.com/" class="uri">https://cran.rstudio.com/</a> and select “Download R for Windows.”</p></li>
<li><p>Click “RTools” and download the latest version of the tools (or the tools that are compatible with your version of R).</p></li>
<li><p>Let the installer run itself (the defaults are fine).</p></li>
</ol>
</div>
<div id="initializing-the-package" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Initializing the Package</h2>
<p>Now we can begin to walk through the process of creating an R package. The first thing you’ll always want to do is run the following function to initialize the package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="package-development.html#cb2-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_package</span>(<span class="st">&#39;path/to/desired/location/packagename&#39;</span>)</span></code></pre></div>
<p>Note that the path specified by <code>usethis::create_package()</code> must currently be empty, otherwise <code>usethis</code> will throw an error. Successfully running this function will create a couple of important files which constitute a skeletal outline of the package. In particular, it will create:</p>
<ol style="list-style-type: decimal">
<li>An ‘R’ subdirectory in the root of your specified directory, which is where all of core the R code of your package will live.</li>
<li>A DESCRIPTION file, which will come with a couple of preset fields.</li>
<li>A NAMESPACE file.</li>
</ol>
<p>You can then set the working directory for your project to an “active” status:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="package-development.html#cb3-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">proj_set</span>(<span class="st">&#39;path/to/desired/location/packagename&#39;</span>)</span></code></pre></div>
<p>Once you’ve set up the basic structure of your package, you can start modifying files and writing it in earnest!</p>
</div>
<div id="the-description" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> The DESCRIPTION</h2>
<p>The DESCRIPTION file gives an extremely brief overview to the package. It includes critical information such as the author of the package, the title, a very short summary of its purpose, and the licensing information. Open the “DESCRIPTION” file using your favorite text editor in order to inspect and edit its contents.</p>
<p>DESCRIPTION is a DCF file (Debian control format). This file format may be unfamiliar, but it’s quite simple. Each line contains a field name and value, separated by a colon. Sometimes, values are long enough to require multiple lines, in which case they are indented by four spaces. For example, the DESCRIPTION file for a newly created package will look like this:</p>
<p><img src="images/packageSS/description_blank.png" /></p>
<p>Let’s go through the fields and discuss what they mean. The first seven fields listed are mandatory, meaning that if you do not include them, the development environment will throw an error later on when you’re trying to build your package.</p>
<ol style="list-style-type: decimal">
<li><strong>Package</strong>: This is the name of the package. It should match the package name you chose earlier, and you should probably just leave this as is.</li>
<li><strong>Title</strong>: A short but more descriptive title of your package than its name.</li>
<li><strong>Version</strong>: The version of your package. Since you’re creating this package for the first time, presumably it’s version 0.1.0.</li>
<li><strong>Authors</strong>: Here, you should add in your given and family names, role, email, and (optionally) your ORCID.</li>
<li><strong>Description</strong>: This should be a one-paragraph <em>comprehensive</em> description of the package. It is necessarily a high level-description, but it should be a complete one.</li>
<li><strong>License</strong>: You should add in a License, which describes how others can legally use the package. Most of the time (especially in the US), you should write ‘CC0’ in the License field, which implies that the package is open for all use, and you have relinquished all your rights to it. For more information on various licensing options, click <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Licensing">this link</a>.</li>
<li><strong>Encoding</strong>: Just leave this as “UTF-8”; discussing what encodings are isn’t super important for this guide. If you’re dying to learn about encodings, visit <a href="https://www.w3.org/International/questions/qa-what-is-encoding">this webpage</a>.</li>
<li><strong>LazyData</strong>: Just leave this as ‘true’, which ensures that if you include any data with your package (which you frequently will), when another user loads your package, they won’t automatically load up the data, but will only load it if it becomes necessary during their use. This option reduces the amount of RAM users have to expend when loading packages, especially if you are planning to include a lot of data with your package.</li>
</ol>
<p>(Note all of the fields from this point on are optional, but encouraged!)</p>
<ol start="9" style="list-style-type: decimal">
<li><strong>Type</strong>: This describes what type of project you’re creating - in this case, because you’re creating a package, you should write “Package.”</li>
<li><strong>Date</strong>: The date, in YYYY-MM-DD fashion.</li>
<li><strong>RoxygenNote</strong>: Roxygen will automatically fill in the version of <code>Roxygen2</code> used to build the package in this field.</li>
</ol>
<p>(These fields are exceptionally important if you are building a package using tools from other packages)</p>
<ol start="12" style="list-style-type: decimal">
<li><strong>Imports</strong>: In this field, you should list the packages which your package needs to function. Each package should be indented by two spaces, separated by a comma, and given its own line. For example, a package which requires <code>ggplot2</code>, <code>nlme</code>, and <code>rpart</code> might have an ‘imports’ field which looks like this:</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="package-development.html#cb4-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;images/packageSS/imports.PNG&quot;</span>)</span></code></pre></div>
<p><img src="images/packageSS/imports.PNG" width="74" />
<!-- ![](images/packageSS/imports.PNG)    --></p>
<ol start="13" style="list-style-type: decimal">
<li><strong>Suggests</strong>: Sometimes, your package will not really <em>require</em> the use of other packages, but it might offer a couple of extra wrappers/functions with those other packages. When those extra functions aren’t strictly necessary, it’s a good idea to have your package <em>suggest</em> imports. For example, a package which includes the following function should include <code>ggplot2</code> in the ‘suggests’ part of the description.</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="package-development.html#cb5-1" aria-hidden="true" tabindex="-1"></a>scalep <span class="ot">&lt;-</span> <span class="cf">function</span>(d, <span class="at">x=</span><span class="dv">1</span>){</span>
<span id="cb5-2"><a href="package-development.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb5-3"><a href="package-development.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If ggplot2 is available, use its qplot function - else, use the default hist function</span></span>
<span id="cb5-4"><a href="package-development.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">requireNamespace</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb5-5"><a href="package-development.html#cb5-5" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">qplot</span>(r, <span class="at">geom=</span><span class="st">&#39;histogram&#39;</span>)</span>
<span id="cb5-6"><a href="package-development.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb5-7"><a href="package-development.html#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hist</span>(r)</span>
<span id="cb5-8"><a href="package-development.html#cb5-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-9"><a href="package-development.html#cb5-9" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb5-10"><a href="package-development.html#cb5-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Here, the function <code>requireNameSpace()</code> checks if <code>ggplot2</code> is available, and if not, the function uses the (slightly less pretty) default histogram function.</p>
<p>Once you know which packages to list in the ‘suggests’ section, you can list them exactly the same way you’d list functions in the ‘imports’ section: each package is indented by two spaces, separated by a comma, and gets its own line.</p>
<p>In general, it’s best to suggest functions instead of requiring them if you barely use them in your package. This will give users a bit more flexibility, because it won’t force them to download packages they will probably never use.</p>
</div>
<div id="writing-code" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Writing Code</h2>
<div id="general-coding-guidelines" class="section level3" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> General Coding Guidelines</h3>
<p>All of your code should be in scripts in the ‘R’ file created in the package development environment, as shown below:</p>
<p><img src="images/packageSS/code1.PNG" /></p>
<p>The coding you will do in package development is slightly different than the coding you’ll normally do when writing R scripts. This is for a couple of reasons:</p>
<ol style="list-style-type: decimal">
<li>When you write a script and load that script using <code>source("script_name")</code>, the code in the script runs when you load it (specifically, when you run the <code>source()</code> command). On the other hand, the code in a package is run when the package is <em>built</em> on your computer. As a result, your code should mostly be focused on building functions, as opposed to a series of actions which the computer ought to take.</li>
<li>Unlike your personal scripts, other people will be using your package, and if your package is good, they’ll be using it in ways you didn’t anticipate. This means you ought to really try to make sure your code is as general as possible and can support a variety of approaches and implementations.</li>
<li>Also, because other people will be using your package, you should avoid modifying the global environment with your package. This means avoiding using functions like <code>require()</code>, <code>library()</code>, or <code>source()</code>; instead, there are other alternatives which can accomplish the same goal without changing the global environment and potentially giving other users an unwanted surprise. For example, instead of using <code>library()</code> and <code>require()</code>, you should be listing your necessary imports in the DESCRIPTION file, as outlined above, and then R will make sure anyone who installs and loads your package also has any other packages your package depends on. The one catch is that you’ll now have to append <code>packagename::</code> in front of the imported functions you want to use, otherwise R won’t recognize them. For example, to use the <code>qplot()</code> function from the <code>ggplot2</code> package, the code should look like:</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="package-development.html#cb6-1" aria-hidden="true" tabindex="-1"></a> ...</span>
<span id="cb6-2"><a href="package-development.html#cb6-2" aria-hidden="true" tabindex="-1"></a>scalep <span class="ot">&lt;-</span> <span class="cf">function</span>(d, <span class="at">x=</span><span class="dv">1</span>){</span>
<span id="cb6-3"><a href="package-development.html#cb6-3" aria-hidden="true" tabindex="-1"></a> ...</span>
<span id="cb6-4"><a href="package-development.html#cb6-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">qplot</span>(r, <span class="at">geom=</span><span class="st">&#39;histogram&#39;</span>)</span>
<span id="cb6-5"><a href="package-development.html#cb6-5" aria-hidden="true" tabindex="-1"></a> ...</span>
<span id="cb6-6"><a href="package-development.html#cb6-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The last thing you should know is that if you want your package to plot things, you will have to surround the <code>plot()</code> commands with a <code>print()</code> statement, like this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="package-development.html#cb7-1" aria-hidden="true" tabindex="-1"></a> ...</span>
<span id="cb7-2"><a href="package-development.html#cb7-2" aria-hidden="true" tabindex="-1"></a>scalep <span class="ot">&lt;-</span> <span class="cf">function</span>(d, <span class="at">x=</span><span class="dv">1</span>){</span>
<span id="cb7-3"><a href="package-development.html#cb7-3" aria-hidden="true" tabindex="-1"></a> ...</span>
<span id="cb7-4"><a href="package-development.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ggplot2<span class="sc">::</span><span class="fu">qplot</span>(r, <span class="at">geom=</span><span class="st">&#39;histogram&#39;</span>))</span>
<span id="cb7-5"><a href="package-development.html#cb7-5" aria-hidden="true" tabindex="-1"></a> ...</span>
<span id="cb7-6"><a href="package-development.html#cb7-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>You should also take care to organize your functions properly. It’s probably a bad idea to stick them all into one script and title it “functions.” Instead, you should organize functions by their purposes - for example, a variety of loss functions might go into a single script. Of course, some very complicated functions might deserve their own script. The file names of the script should be descriptive - for example, a script of loss functions might be named “loss_functions.R”.</p>
</div>
<div id="code-style" class="section level3" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Code Style</h3>
<p>Now let’s talk about code style. These recommendations are shortened and adapted from <a href="http://r-pkgs.had.co.nz/r.html">Hadley Wickham’s book</a>, which in turn were adapted from Google’s style guide.</p>
<ol style="list-style-type: decimal">
<li><strong>Comments</strong>: Comments are the best way to make your code readable. In general, you should err on the side of commenting too much rather than too little, and your comments should explain the <em>motivation</em> of your code as opposed to what your code actually does (although admittedly the line between those two things is a bit blurry). Moreover, you can use lines of ‘# —————————’ or ‘# ==================’ to separate sections of your code. Here are some examples:</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="package-development.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Returns the squared element-wise difference between two vectors</span></span>
<span id="cb8-2"><a href="package-development.html#cb8-2" aria-hidden="true" tabindex="-1"></a>loss <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y) {</span>
<span id="cb8-3"><a href="package-development.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  error <span class="ot">&lt;-</span> (x<span class="sc">-</span>y)<span class="sc">**</span><span class="dv">2</span></span>
<span id="cb8-4"><a href="package-development.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(error)</span>
<span id="cb8-5"><a href="package-development.html#cb8-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-6"><a href="package-development.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#---------------------------------------------------------------------------</span></span>
<span id="cb8-7"><a href="package-development.html#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="package-development.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Takes the square root of any real number, returning a complex number</span></span>
<span id="cb8-9"><a href="package-development.html#cb8-9" aria-hidden="true" tabindex="-1"></a>general_sqrt <span class="ot">&lt;-</span> <span class="cf">function</span> (x) {</span>
<span id="cb8-10"><a href="package-development.html#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return the normal square root if x &gt; 0</span></span>
<span id="cb8-11"><a href="package-development.html#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">||</span> x <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb8-12"><a href="package-development.html#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">complex</span>(<span class="at">real=</span><span class="fu">sqrt</span>(x), <span class="at">imaginary=</span><span class="dv">0</span>))</span>
<span id="cb8-13"><a href="package-development.html#cb8-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-14"><a href="package-development.html#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Else return the complex square root</span></span>
<span id="cb8-15"><a href="package-development.html#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb8-16"><a href="package-development.html#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">complex</span>(<span class="at">real =</span> <span class="dv">0</span>, <span class="at">imaginary =</span> <span class="fu">sqrt</span>(<span class="sc">-</span>x)))</span>
<span id="cb8-17"><a href="package-development.html#cb8-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-18"><a href="package-development.html#cb8-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><strong>Names</strong>: Variable and function names should be descriptive but concise, and variable names should generally be nouns whereas function names tend to be verbs. Most R developers keep their function/variable names all lowercase and separate multiple words with underscores. There are no strict rules on this, but it’s nice to be consistent with <em>some</em> rules because it makes your code readable.</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="package-development.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bad example - function name</span></span>
<span id="cb9-2"><a href="package-development.html#cb9-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb9-3"><a href="package-development.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">sqrt</span>(x))</span>
<span id="cb9-4"><a href="package-development.html#cb9-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-5"><a href="package-development.html#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="package-development.html#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Good example - function name</span></span>
<span id="cb9-7"><a href="package-development.html#cb9-7" aria-hidden="true" tabindex="-1"></a>take_sqrt <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb9-8"><a href="package-development.html#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">sqrt</span>(x))</span>
<span id="cb9-9"><a href="package-development.html#cb9-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-10"><a href="package-development.html#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="package-development.html#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Bad example - variable name</span></span>
<span id="cb9-12"><a href="package-development.html#cb9-12" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">read.table</span>(path)</span>
<span id="cb9-13"><a href="package-development.html#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="package-development.html#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Good example - variable name</span></span>
<span id="cb9-15"><a href="package-development.html#cb9-15" aria-hidden="true" tabindex="-1"></a>car_data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(path)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><strong>Curly Braces</strong>: You should start a new line after you write an opening curly brace, and ending curly braces should get their own lines, unless you have an else clause or the line is exceptionally simple.</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="package-development.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bad examples</span></span>
<span id="cb10-2"><a href="package-development.html#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="package-development.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (condition) {</span>
<span id="cb10-4"><a href="package-development.html#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complicated_function</span>(x)} <span class="co"># Ending curly brace should get a new line</span></span>
<span id="cb10-5"><a href="package-development.html#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="package-development.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Good examples</span></span>
<span id="cb10-7"><a href="package-development.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (condition) {<span class="fu">do</span>(x)} <span class="cf">else</span> {<span class="fu">do</span>(y)}</span>
<span id="cb10-8"><a href="package-development.html#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="package-development.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (condition) {</span>
<span id="cb10-10"><a href="package-development.html#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complicated_function_call</span>(arg1, arg2, arg3)</span>
<span id="cb10-11"><a href="package-development.html#cb10-11" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb10-12"><a href="package-development.html#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">other_complex_function_call</span>(arg7, arg3, arg5)</span>
<span id="cb10-13"><a href="package-development.html#cb10-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>As always, you can break the rules if you have a good reason to.</p>
<p>Different organizations and programmers may have different styles, but in general, you should remember:</p>
<ol style="list-style-type: decimal">
<li>Your goal should always be to make your code readable!</li>
<li>Whatever style guide you follow, follow it <em>consistently</em>.</li>
<li>When in doubt, follow the conventions of the organization you’re working for.</li>
</ol>
</div>
<div id="warnings-and-simplicity" class="section level3" number="1.5.3">
<h3><span class="header-section-number">1.5.3</span> Warnings and Simplicity</h3>
<p>Consider the case of the <code>scalep()</code> function, which currently takes a 2-column dataframe as an input, divides the second column by the first, and returns/graphs some scaled proportion of the quotient vector. One version of this function, which follows almost all of the guidelines above, might look like this:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="package-development.html#cb11-1" aria-hidden="true" tabindex="-1"></a>scalep <span class="ot">&lt;-</span> <span class="cf">function</span>(d, <span class="at">x=</span><span class="dv">1</span>){</span>
<span id="cb11-2"><a href="package-development.html#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="package-development.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Intialize resulting vector</span></span>
<span id="cb11-4"><a href="package-development.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb11-5"><a href="package-development.html#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="package-development.html#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Iterate through and divide column 2 of d by column 1 of d</span></span>
<span id="cb11-7"><a href="package-development.html#cb11-7" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb11-8"><a href="package-development.html#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(i <span class="sc">&lt;</span> <span class="fu">length</span>(d[ ,<span class="dv">1</span>]) <span class="sc">+</span> <span class="dv">1</span>){</span>
<span id="cb11-9"><a href="package-development.html#cb11-9" aria-hidden="true" tabindex="-1"></a>    row <span class="ot">&lt;-</span> d[i,]</span>
<span id="cb11-10"><a href="package-development.html#cb11-10" aria-hidden="true" tabindex="-1"></a>    result <span class="ot">&lt;-</span> <span class="fu">append</span>(result, row[[<span class="dv">2</span>]]<span class="sc">/</span>row[[<span class="dv">1</span>]])</span>
<span id="cb11-11"><a href="package-development.html#cb11-11" aria-hidden="true" tabindex="-1"></a>    i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb11-12"><a href="package-development.html#cb11-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-13"><a href="package-development.html#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="package-development.html#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print the graph using either ggplot2 or the hist function</span></span>
<span id="cb11-15"><a href="package-development.html#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">requireNamespace</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb11-16"><a href="package-development.html#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(ggplot2<span class="sc">::</span><span class="fu">qplot</span>(result, <span class="at">geom=</span><span class="st">&#39;histogram&#39;</span>))</span>
<span id="cb11-17"><a href="package-development.html#cb11-17" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb11-18"><a href="package-development.html#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">hist</span>(result))</span>
<span id="cb11-19"><a href="package-development.html#cb11-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-20"><a href="package-development.html#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="package-development.html#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return the result, multiplying by the optional scalar</span></span>
<span id="cb11-22"><a href="package-development.html#cb11-22" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> x<span class="sc">*</span>result</span>
<span id="cb11-23"><a href="package-development.html#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb11-24"><a href="package-development.html#cb11-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>However, this function still has a couple of problems. It’s not super easy to use because (a) it’s understandably hard for other programmers to remember which column is divided by which and (b) there’s a simpler way to accomplish the code above which will make it more readable. Specifically, it might be easier to just have arguments called ‘factors’ and ‘divisors’ and then divide them, like this:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="package-development.html#cb12-1" aria-hidden="true" tabindex="-1"></a>scalep <span class="ot">&lt;-</span> <span class="cf">function</span>(factors, divisors, <span class="at">constant =</span> <span class="dv">1</span>) {</span>
<span id="cb12-2"><a href="package-development.html#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="package-development.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Divide and multiply by optional scalar</span></span>
<span id="cb12-4"><a href="package-development.html#cb12-4" aria-hidden="true" tabindex="-1"></a>  proportions <span class="ot">&lt;-</span> constant<span class="sc">*</span>factors<span class="sc">/</span>divisors</span>
<span id="cb12-5"><a href="package-development.html#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="package-development.html#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print the graph using either ggplot2 or the hist function</span></span>
<span id="cb12-7"><a href="package-development.html#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">requireNamespace</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb12-8"><a href="package-development.html#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(ggplot2<span class="sc">::</span><span class="fu">qplot</span>(proportions, <span class="at">geom=</span><span class="st">&#39;histogram&#39;</span>))</span>
<span id="cb12-9"><a href="package-development.html#cb12-9" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb12-10"><a href="package-development.html#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">hist</span>(proportions))</span>
<span id="cb12-11"><a href="package-development.html#cb12-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-12"><a href="package-development.html#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="package-development.html#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return the result</span></span>
<span id="cb12-14"><a href="package-development.html#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(proportions)</span>
<span id="cb12-15"><a href="package-development.html#cb12-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The new argument structure will make it a bit easier to use. Similarly, the new structure simplifies the code, making it a bit more readable. However, it does pose one problem: whereas the previous structure mandated that the two vectors be the same length (because they were part of a dataframe), in this function, the two vectors might not be the same length and the function would not always throw an error (specifically, if ‘factors’ has a length which is is an integer multiple of the length of ‘divisors’, R will not warn the user at all). This problem is a type of <strong>silent error</strong> (silent errors are bugs which do not issue warnings or errors). Silent errors are terrible because they make bug-hunting extremely difficult: in large repositories of code, it becomes nearly impossible to find which specific line is causing problems without some kind of warning. Thus, it’s also worth adding in a couple of lines to warn the user if the factors and divisors are of different lengths, as is outlined below:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="package-development.html#cb13-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check divisors and factors are the same length</span></span>
<span id="cb13-2"><a href="package-development.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(divisors) <span class="sc">!=</span> <span class="fu">length</span>(factors)) {</span>
<span id="cb13-3"><a href="package-development.html#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">warning</span>(<span class="st">&#39;Length of divisors argument is not equal to length of factors argument&#39;</span>)</span>
<span id="cb13-4"><a href="package-development.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
<p>Lastly, it’s just worth adding an extra optional argument to let your users turn off the graphing feature of <code>scalep()</code>, just to make the function more useable, as follows:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="package-development.html#cb14-1" aria-hidden="true" tabindex="-1"></a>scalep <span class="ot">&lt;-</span> <span class="cf">function</span>(factors, divisors, <span class="at">constant =</span> <span class="dv">1</span>, <span class="at">graph =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb14-2"><a href="package-development.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="package-development.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb14-4"><a href="package-development.html#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="package-development.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If graph = True, print the graph using either ggplot2 or the hist function</span></span>
<span id="cb14-6"><a href="package-development.html#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">requireNamespace</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="sc">&amp;</span> graph) {</span>
<span id="cb14-7"><a href="package-development.html#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(ggplot2<span class="sc">::</span><span class="fu">qplot</span>(proportions, <span class="at">geom=</span><span class="st">&#39;histogram&#39;</span>))</span>
<span id="cb14-8"><a href="package-development.html#cb14-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (graph) {</span>
<span id="cb14-9"><a href="package-development.html#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">hist</span>(proportions))</span>
<span id="cb14-10"><a href="package-development.html#cb14-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-11"><a href="package-development.html#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="package-development.html#cb14-12" aria-hidden="true" tabindex="-1"></a>  ...</span></code></pre></div>
<p>To summarize, this subsection thus contained three core ideas: (1) make your code simple, (2) make it easy to use by labeling arguments, and (3) always avoid silent errors.</p>
</div>
<div id="loading-your-code" class="section level3" number="1.5.4">
<h3><span class="header-section-number">1.5.4</span> Loading Your Code</h3>
<p>If you’ve finished writing your code and want to play with it a little bit, you can use the following function:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="package-development.html#cb15-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>()</span></code></pre></div>
<p>which (according to its documentation) “roughly simulates what happens when a package is installed and loaded with library.” As we’ll see in the <a href="package-development.html#releasing-your-package">build</a>, <a href="package-development.html#testing">testing</a>, and <a href="./integrated-development-environments.html#ex-building-packages">RStudio</a> sections, there are better ways to simulate the user experience and test your code, but <code>load_all()</code> is often a useful intermediate step.</p>
</div>
</div>
<div id="testing" class="section level2" number="1.6">
<h2><span class="header-section-number">1.6</span> Testing</h2>
<div id="why-should-you-test" class="section level3" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> Why should you test?</h3>
<p>Suppose an imaginary programmer named Grace has created a package and has been using it for a while, but she decides she’d like to modify one function to improve it. She modifies her function, tests it a bit, and then publishes a new version of the package. Yet two weeks later, another imaginary programmer named Carlos discovers that the changes she made created a bug in <em>another</em> function in the package! This situation is very annoying, especially if Carlos has no idea what has caused the bug or how to fix it. Unfortunately, it’s also an extremely common problem.</p>
<p>The solution to problems like this is to test your package <em>systematically</em> and <em>automatically</em>. If Grace had rigorously tested the entire package before publishing it, Carlos would never have had to deal with the new bug- Grace would have found out immediately. In other words, a good principle in package development is to make sure your code <em>fails as fast as possible,</em> so you can find out and fix it. Of course, all programmers test their code, but not everyone tests systematically and automatically.</p>
</div>
<div id="what-are-unit-tests" class="section level3" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> What are unit tests?</h3>
<p>Tests compare the <em>expected</em> output of a block of code to its <em>actual</em> output. For example, the following test tests whether the “generalized square root” function actually returns <span class="math inline">\(2\)</span> as the square root of <span class="math inline">\(4\)</span>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="package-development.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expect_equal</span>(<span class="fu">general_sqrt</span>(<span class="dv">4</span>), <span class="fu">complex</span>(<span class="at">real =</span> <span class="dv">2</span>, <span class="at">imaginary =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><em>Unit tests</em> usually run on the computer of the developer who is modifying a package and also should run automatically upon building a package.</p>
<p>We’ll talk a little more about how exactly to create tests below, but hopefully this makes the general concept clear (you’ve also probably been using the general concept as you program).</p>
</div>
<div id="setting-up-the-testing-environment" class="section level3" number="1.6.3">
<h3><span class="header-section-number">1.6.3</span> Setting up the testing environment</h3>
<p>Creating unit tests is actually quite easy, thanks to a package called <code>testthat</code> which works in combination with <code>usethis</code>. To begin, you should run the following command in your favorite IDE, or even in the R Gui:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="package-development.html#cb17-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_testthat</span>()</span></code></pre></div>
<p>This will do a couple of things. First, it will add <code>testthat</code> to the Suggests part of the DESCRIPTION, which will help other collaborators know to use <code>testthat</code> when modifying/working on the package. It will also create a ‘tests/testthat’ directory in your project, as well a file called ‘test/testthat.R’, as shown below.</p>
<p><img src="images/testSS/devtoolstestthat.PNG" /></p>
</div>
<div id="expectations" class="section level3" number="1.6.4">
<h3><span class="header-section-number">1.6.4</span> Expectations</h3>
<p>Before discussing how to write unit tests, we need to properly describe an expectation. An expectation tests whether the actual output of a single function call is what the developer expected. The <code>testthat</code> package has a number of functions which compare outputs to expected values. When calling one of these functions, one of two things can happen:</p>
<ol style="list-style-type: decimal">
<li>If the actual output matches the expectation, nothing will happen!</li>
<li>If the actual output does not match the expectation, it will throw an error.</li>
</ol>
<p>For example, <code>expect_equal()</code> uses the base R function <code>all.equal()</code> to check whether an output is (approximately) equal to an expectation. In the following code, the first function call will do nothing - the second function call will throw an error, displayed below.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="package-development.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(testthat)</span>
<span id="cb18-2"><a href="package-development.html#cb18-2" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">expect_equal</span>(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb18-3"><a href="package-development.html#cb18-3" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">expect_equal</span>(<span class="dv">2</span>, <span class="dv">4</span>)</span></code></pre></div>
<p><img src="images/testSS/expectationerror.PNG" /></p>
<p>Here’s an (abbreviated) list of the expectation functions:</p>
<ol style="list-style-type: decimal">
<li><strong>expect_equal</strong>, as aforementioned, checks equality using the “all.equal()” base function.</li>
<li><strong>expect_identical</strong> checks equality using the <code>identical()</code> base function. Generally, it’s better to use <code>expect_equal()</code> because lots of R functions use numerical approximations which will cause expect_identical to fail when you don’t want it to.</li>
<li><strong>expect_match</strong>, <strong>expect_output</strong>, <strong>expect_message</strong>, <strong>expect_warning</strong>, and <strong>expect_error</strong> all respectively test whether a string, output, warning, or error match a regular expression. For example, the following two expectations functions will not throw errors:</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="package-development.html#cb19-1" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">expect_match</span>(<span class="st">&#39;hello1234&#39;</span>, <span class="st">&#39;hello&#39;</span>)</span>
<span id="cb19-2"><a href="package-development.html#cb19-2" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">expect_warning</span>(<span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">2</span>), <span class="st">&#39;NaNs produced&#39;</span>)</span></code></pre></div>
<p>The tests do not fail because (i) ‘hello1234’ contains ‘hello’ and (ii) the error message produced by <code>sqrt(-2)</code> contains the phrase ‘NaNs produced’.</p>
<ol start="4" style="list-style-type: decimal">
<li><strong>expect_is</strong> tests whether an object inherits from a class, specified in quotes. For example, the following test passes:</li>
</ol>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="package-development.html#cb20-1" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">expect_is</span>(<span class="fu">sqrt</span>(<span class="dv">2</span>), <span class="st">&#39;numeric&#39;</span>)</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li><strong>expect_true</strong> and <strong>expect_false</strong> respectively expect a statement to evaluate to TRUE or FALSE.</li>
</ol>
</div>
<div id="structure-and-location-of-unit-tests" class="section level3" number="1.6.5">
<h3><span class="header-section-number">1.6.5</span> Structure and Location of Unit Tests</h3>
<p>Each <em>unit test</em> (which is written in an R script) should use a couple of expectations to test a single core function. It should use the function <code>test_that()</code> (from the <code>testthat</code> package). <code>test_that()</code> takes two parameters: a string, which describes the test, and a couple of expectations, surrounded by curly braces. For example, the following code will test whether the <code>general_sqrt()</code> function from the <code>devex</code> package returns a complex number.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="package-development.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;Returns complex number&quot;</span>, {</span>
<span id="cb21-2"><a href="package-development.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_is</span>(<span class="fu">general_sqrt</span>(<span class="sc">-</span><span class="dv">2</span>), <span class="st">&#39;complex&#39;</span>)</span>
<span id="cb21-3"><a href="package-development.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_is</span>(<span class="fu">general_sqrt</span>(<span class="dv">2</span>), <span class="st">&#39;complex&#39;</span>)</span>
<span id="cb21-4"><a href="package-development.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_is</span>(<span class="fu">general_sqrt</span>(<span class="dv">0</span>), <span class="st">&#39;complex&#39;</span>)</span>
<span id="cb21-5"><a href="package-development.html#cb21-5" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>Multiple tests with similar functions should be put in the same file, and those test files must be put in the tests/testthat/ directory. Moreover, their name must start with the word ‘test’ - this will help R automatically run your tests for you. For example, in the <code>devex</code> package, there are two very simple helper functions (<code>general_sqrt()</code> and <code>loss()</code>) and one moderately complex function (<code>scalep()</code>). As a result, the <code>devex</code> package has exactly two testing files: one called ‘testhelpers’, which tests the helper functions, and another called ‘testscalep’, which tests the <code>scalep()</code> function. The ‘testhelpers’ file looks like this:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="package-development.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devex)</span>
<span id="cb22-2"><a href="package-development.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">context</span>(<span class="st">&quot;generalized sqrt and loss&quot;</span>)</span>
<span id="cb22-3"><a href="package-development.html#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="package-development.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generalized sqrt ---------------------------------------</span></span>
<span id="cb22-5"><a href="package-development.html#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="package-development.html#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;Returns complex number&quot;</span>, {</span>
<span id="cb22-7"><a href="package-development.html#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_is</span>(<span class="fu">general_sqrt</span>(<span class="sc">-</span><span class="dv">2</span>), <span class="st">&#39;complex&#39;</span>)</span>
<span id="cb22-8"><a href="package-development.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_is</span>(<span class="fu">general_sqrt</span>(<span class="dv">2</span>), <span class="st">&#39;complex&#39;</span>)</span>
<span id="cb22-9"><a href="package-development.html#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_is</span>(<span class="fu">general_sqrt</span>(<span class="dv">0</span>), <span class="st">&#39;complex&#39;</span>)</span>
<span id="cb22-10"><a href="package-development.html#cb22-10" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb22-11"><a href="package-development.html#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="package-development.html#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;Returns correct sqrt&quot;</span>, {</span>
<span id="cb22-13"><a href="package-development.html#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">general_sqrt</span>(<span class="sc">-</span><span class="fl">1.53</span>), <span class="fu">complex</span>(<span class="at">real =</span> <span class="dv">0</span>, <span class="at">imaginary =</span> <span class="fu">sqrt</span>(<span class="fl">1.53</span>)))</span>
<span id="cb22-14"><a href="package-development.html#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">general_sqrt</span>(<span class="sc">-</span><span class="dv">2</span>), <span class="fu">complex</span>(<span class="at">real =</span> <span class="dv">0</span>, <span class="at">imaginary =</span> <span class="fu">sqrt</span>(<span class="dv">2</span>)))</span>
<span id="cb22-15"><a href="package-development.html#cb22-15" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb22-16"><a href="package-development.html#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="package-development.html#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;Warnings for vectors of length &gt; 1&quot;</span>, {</span>
<span id="cb22-18"><a href="package-development.html#cb22-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_warning</span>(<span class="fu">general_sqrt</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">0</span>)))</span>
<span id="cb22-19"><a href="package-development.html#cb22-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_warning</span>(<span class="fu">general_sqrt</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">2</span>)), <span class="st">&#39;NaNs produced&#39;</span>)</span>
<span id="cb22-20"><a href="package-development.html#cb22-20" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb22-21"><a href="package-development.html#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="package-development.html#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Loss ---------------------------------------------------</span></span>
<span id="cb22-23"><a href="package-development.html#cb22-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-24"><a href="package-development.html#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;Returns correct loss&quot;</span>, {</span>
<span id="cb22-25"><a href="package-development.html#cb22-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">loss</span>(<span class="dv">0</span>, <span class="dv">3</span>), <span class="dv">9</span>)</span>
<span id="cb22-26"><a href="package-development.html#cb22-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">loss</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)), <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">4</span>))</span>
<span id="cb22-27"><a href="package-development.html#cb22-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">loss</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">25</span>, <span class="dv">4</span>))</span>
<span id="cb22-28"><a href="package-development.html#cb22-28" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>Each test file, as demonstrated above, needs to load the package of interest (using <code>library()</code> is fine) and also should supply a string which succinctly describes the general purpose of all of the tests in the test file to the <code>context()</code> function.</p>
<p>You can run all of the tests in the test/testthat directory by running the following <code>devtools</code> function:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="package-development.html#cb23-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">test</span>()</span></code></pre></div>
<p>If any test throws an error, R will report two things. First, it will report the string given in the test which was given to the <code>test_that()</code> function call. Second, it will report the filename of the test file as well as the line of code that threw an error. For example, running the above tests yields the following result:</p>
<p><img src="images/testSS/testthaterror1.PNG" /></p>
<p>This indicates that line 18 of testhelpers.R failed in the test “Warnings for vectors of length &gt; 1.” Looking at the test code reveals that the <code>general_sqrt()</code> function does not return a warning for positive vectors of length greater than one.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="package-development.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expect_warning</span>(<span class="fu">general_sqrt</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">0</span>)))</span></code></pre></div>
<p>To fix this, it might be worth adding in an extra line or two which ensures that the input to <code>general_sqrt()</code> is as it should be (to prevent users from getting unexpected results).</p>
</div>
<div id="writing-good-tests" class="section level3" number="1.6.6">
<h3><span class="header-section-number">1.6.6</span> Writing Good Tests</h3>
<p>Good tests have a couple of characteristics.</p>
<p><strong>First</strong>, good tests have high <em>coverage,</em> meaning that they test a large percentage of the lines of code of the package. For example, the code for the <code>general_sqrt()</code> function is as follows:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="package-development.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This function takes the complex square root of real numbers</span></span>
<span id="cb25-2"><a href="package-development.html#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="package-development.html#cb25-3" aria-hidden="true" tabindex="-1"></a>general_sqrt <span class="ot">&lt;-</span> <span class="cf">function</span> (x){</span>
<span id="cb25-4"><a href="package-development.html#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="package-development.html#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Issue warning for longer vectors</span></span>
<span id="cb25-6"><a href="package-development.html#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(x) <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb25-7"><a href="package-development.html#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">warning</span>(<span class="st">&#39;Argument of general_sqrt has length greater than 1&#39;</span>)</span>
<span id="cb25-8"><a href="package-development.html#cb25-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb25-9"><a href="package-development.html#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="package-development.html#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return the normal square root if x &gt; 0</span></span>
<span id="cb25-11"><a href="package-development.html#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">||</span> x <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb25-12"><a href="package-development.html#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">complex</span>(<span class="at">real =</span> <span class="fu">sqrt</span>(x), <span class="at">imaginary =</span> <span class="dv">0</span>))</span>
<span id="cb25-13"><a href="package-development.html#cb25-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb25-14"><a href="package-development.html#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="package-development.html#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Else return the complex square root</span></span>
<span id="cb25-16"><a href="package-development.html#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="package-development.html#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb25-18"><a href="package-development.html#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">complex</span>(<span class="at">real =</span> <span class="dv">0</span>, <span class="at">imaginary =</span> <span class="fu">sqrt</span>(<span class="sc">-</span>x)))</span>
<span id="cb25-19"><a href="package-development.html#cb25-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb25-20"><a href="package-development.html#cb25-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-21"><a href="package-development.html#cb25-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The following test has low coverage for the <code>general_sqrt()</code> function:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="package-development.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;Returns correct sqrt&quot;</span>, {</span>
<span id="cb26-2"><a href="package-development.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">general_sqrt</span>(<span class="sc">-</span><span class="fl">1.53</span>), <span class="fu">complex</span>(<span class="at">real =</span> <span class="dv">0</span>, <span class="at">imaginary =</span> <span class="fu">sqrt</span>(<span class="fl">1.53</span>)))</span>
<span id="cb26-3"><a href="package-development.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">general_sqrt</span>(<span class="sc">-</span><span class="dv">2</span>), <span class="fu">complex</span>(<span class="at">real =</span> <span class="dv">0</span>, <span class="at">imaginary =</span> <span class="fu">sqrt</span>(<span class="dv">2</span>)))</span>
<span id="cb26-4"><a href="package-development.html#cb26-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>because it only tests whether <code>general_sqrt()</code> returns the correct square root for negative numbers. This test thus only covers half of the code in <code>general_sqrt()</code>, because the mechanism for dealing with nonnegative numbers is entirely separate. The following test is a better example, because it tests both positive and negative numbers.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="package-development.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;Returns correct sqrt&quot;</span>, {</span>
<span id="cb27-2"><a href="package-development.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">general_sqrt</span>(<span class="fl">1.53</span>), <span class="fu">complex</span>(<span class="at">real =</span> <span class="fu">sqrt</span>(<span class="fl">1.53</span>), <span class="at">imaginary =</span> <span class="dv">0</span>))</span>
<span id="cb27-3"><a href="package-development.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">general_sqrt</span>(<span class="sc">-</span><span class="dv">2</span>), <span class="fu">complex</span>(<span class="at">real =</span> <span class="dv">0</span>, <span class="at">imaginary =</span> <span class="fu">sqrt</span>(<span class="dv">2</span>)))</span>
<span id="cb27-4"><a href="package-development.html#cb27-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><strong>Second</strong>, it’s important to remember that coverage is only important because tests with high coverage tend to test all the different functionalities of a package. It’s possible to have tests which have very high coverage but aren’t great tests. Consider the following example.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="package-development.html#cb28-1" aria-hidden="true" tabindex="-1"></a>print_it <span class="ot">&lt;-</span> <span class="cf">function</span>(text){</span>
<span id="cb28-2"><a href="package-development.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&#39;hello&#39;</span>)</span>
<span id="cb28-3"><a href="package-development.html#cb28-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-4"><a href="package-development.html#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="package-development.html#cb28-5" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">expect_warning</span>(<span class="fu">print_it</span>(<span class="st">&#39;hi&#39;</span>), <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] &quot;hello&quot;</code></pre>
<p>This expectation has 100% coverage because it will run every line of code (the expectation will also pass because no warning will be thrown). However, it’s not sufficient alone because it doesn’t actually test whether print_it returns the desired output: in this case, print_it will always print ‘hello’. In other words, the expectation does not test all of the functionality of the function.</p>
<p><strong>Third</strong>, tests should run relatively quickly, if possible. Sometimes, it’s okay to maximize coverage even if you don’t test every single functionality to save time, because <em>usually</em> high coverage ensures you test most of the functionality of the package. This is particularly true because lots of integrated testing software (which we’ll discuss in integrated tests) will not be able to easily run tests which take too long. More on that later.</p>
<p><strong>Fourth</strong>, tests should be clear to the reader, because sometimes there are bugs in tests too. If others eventually help develop or maintain your packages, they’ll want to know what it means when a test fails. Moreover, for large packages, you yourself may have trouble remembering the exact details of every test you’ve written. Thus, your tests should return clear error messages and be readable. For example, the following test is a bad example, for two reasons:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="package-development.html#cb30-1" aria-hidden="true" tabindex="-1"></a>sigmoid <span class="ot">&lt;-</span> <span class="cf">function</span>(x, a, b){</span>
<span id="cb30-2"><a href="package-development.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">exp</span>(a<span class="sc">*</span>x)<span class="sc">/</span>(<span class="fu">exp</span>(a<span class="sc">*</span>x) <span class="sc">+</span> b))</span>
<span id="cb30-3"><a href="package-development.html#cb30-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-4"><a href="package-development.html#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="package-development.html#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&#39;sigmoid output&#39;</span>, {</span>
<span id="cb30-6"><a href="package-development.html#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">sigmoid</span>(<span class="fl">0.3068528</span>, <span class="dv">1</span>, <span class="fl">1.3591409</span>), <span class="fl">0.5</span>, <span class="dv">10</span><span class="sc">^-</span><span class="dv">7</span>)</span>
<span id="cb30-7"><a href="package-development.html#cb30-7" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>The string ‘sigmoid output’ does not describe the purpose of the test, which is to test the precision of the sigmoid output. This means that if the test fails, it will be hard to tell what’s wrong. Additionally, the purpose of the test is not clear to begin with - what do the seemingly random decimals mean? At the very least, it’s probably worth putting comments in explaining the point of the test, as shown below.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="package-development.html#cb31-1" aria-hidden="true" tabindex="-1"></a>sigmoid <span class="ot">&lt;-</span> <span class="cf">function</span>(x, a, b){</span>
<span id="cb31-2"><a href="package-development.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">exp</span>(a<span class="sc">*</span>x)<span class="sc">/</span>(<span class="fu">exp</span>(a<span class="sc">*</span>x) <span class="sc">+</span> b))</span>
<span id="cb31-3"><a href="package-development.html#cb31-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-4"><a href="package-development.html#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="package-development.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&#39;test sigmoid precision&#39;</span>, {</span>
<span id="cb31-6"><a href="package-development.html#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="package-development.html#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check sigmoid(ln(e/2), ln(e/2), e/2) is very close to 1/2.</span></span>
<span id="cb31-8"><a href="package-development.html#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="package-development.html#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">sigmoid</span>(<span class="fl">0.3068528</span>, <span class="dv">1</span>, <span class="fl">1.3591409</span>), <span class="fl">0.5</span>, <span class="dv">10</span><span class="sc">^-</span><span class="dv">7</span>)</span>
<span id="cb31-10"><a href="package-development.html#cb31-10" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>This test is a bit more interpretable/readable and delivers a better error message.</p>
</div>
<div id="automated-checking" class="section level3" number="1.6.7">
<h3><span class="header-section-number">1.6.7</span> Automated Checking</h3>
<p>The <code>usethis::test()</code> function is pretty nice, but all it does is run your unit tests - it doesn’t check everything else in your package. Thankfully, the <code>devtools::check()</code> function fills this gap.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="package-development.html#cb32-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span></code></pre></div>
<p>Running the check function will ensure your documentation is up to date, automatically run all of your unit tests, and even check your code for common problems. It will also create a new directory called ‘Man’ within your package folder, which will later be populated with the help files for your functions. Note that even if your package passes all of its tests, you might still see additional warnings for other reasons, as exemplified below:</p>
<p><img src="images/testSS/autobuildresults.PNG" /></p>
<p>Although it’s not necessary to understand every check that the check function runs, it’s worth noting that every check it performs is relatively important, and if it signals any warnings or errors, it’s definitely worth fixing them. It’s also probably worth fixing any “notes” it issues. If you’re curious, you can read more about what each type of check in the automated check does <a href="http://r-pkgs.had.co.nz/check.html#check">here</a>.</p>
</div>
<div id="bonus-the-goodpractice-package" class="section level3" number="1.6.8">
<h3><span class="header-section-number">1.6.8</span> Bonus: The goodpractice Package</h3>
<p>The aforementioned automated checking system for R is pretty good, but there is a slightly more comprehensive version: the <a href="https://github.com/MangoTheCat/goodpractice/blob/master/vignettes/goodpractice.Rmd">goodpractice package</a>. The <code>goodpractice</code> package has an informative name - the entire purpose of the package is to check whether your package follows proper package development conventions and procedures (i.e. whether your package follows good practices). For example, running the <code>goodpractice</code> package on the <code>devex</code> package yielded the following helpful results:</p>
<p><img src="images/testSS/goodpractice1.PNG" /></p>
<p>Let’s run through the key points of using <code>goodpractice</code> below.</p>
<p>To install the goodpractice package, just run the following command in the R console:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="package-development.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;goodpractice&#39;</span>)</span></code></pre></div>
<p>Once you’ve installed the <code>goodpractice</code> package, you basically only need to use a single function from it: the <code>gp()</code> or <code>goodpractice()</code> function (which call the same code). This function will run comprehensive automated checks on your package, and it takes exactly one input, the path of your built package. However, it’s important to note that the path of your <em>built</em> package is not identical to the path of the repo containing it. For example, I work on the <code>devex</code> package in “/Users/name/Documents/R/packageguidelines/devex”, but the built package lives at another location. For <code>goodpractice()</code> to work, you need to use this latter path. If you don’t know what the path is, you can use the “system.file” function to retrieve it for you, as demonstrated below.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="package-development.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve path</span></span>
<span id="cb34-2"><a href="package-development.html#cb34-2" aria-hidden="true" tabindex="-1"></a>package_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="at">package =</span> <span class="st">&#39;devex&#39;</span>)</span>
<span id="cb34-3"><a href="package-development.html#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="package-development.html#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check package</span></span>
<span id="cb34-5"><a href="package-development.html#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(goodpractice)</span>
<span id="cb34-6"><a href="package-development.html#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="fu">gp</span>(package_path)</span></code></pre></div>
<p>And that’s it! The <code>goodpractice</code> package is a bit picky, so it’s okay to leave a few concerns unresolved, but in general it gives good advice. If you’re diligent, you might eventually see a result like this:</p>
<p><img src="images/testSS/goodpractice2.PNG" /></p>
<p>which signals that your package conforms to all good practices. Lastly, although it’s beyond the scope of this guide, you ought to know that you can create custom checks using the <code>goodpractice</code> package, as documented <a href="https://github.com/MangoTheCat/goodpractice/blob/master/vignettes/custom_checks.Rmd">here</a>.</p>
<p>[up to here 2022]</p>
</div>
<div id="tips-and-tricks" class="section level3" number="1.6.9">
<h3><span class="header-section-number">1.6.9</span> Tips and Tricks</h3>
<p>When testing, there are a couple of key principles to keep in mind:</p>
<ol style="list-style-type: decimal">
<li>You want to expose bugs as quickly as possible so they don’t create even larger headaches down the road! As Christopher Gandrud puts it, testing is all about ‘failing faster.’ To this end, you should continuously test your packages.</li>
<li>Make sure your tests <em>cover</em> the package code and also test all of the key functionality of the package. In an ideal world, a package should pass all of its tests only if all of its core functionality is bug-free.</li>
<li>Test names, organization, and error messages must be descriptive and easy to understand. One of the main purposes of tests is to inform you <em>where</em> your code is failing, and to understand that, you need informative error messages. Otherwise, you will find yourself spending hours traversing your code to find bugs.</li>
</ol>
<p>The <code>devtools</code> cheatsheet, linked <a href="https://www.rstudio.com/wp-content/uploads/2015/03/devtools-cheatsheet.pdf">here</a>, references a lot of the key components of the <code>testthat</code> package.</p>
</div>
</div>
<div id="documentation" class="section level2" number="1.7">
<h2><span class="header-section-number">1.7</span> Documentation</h2>
<p>Documentation is an absolutely essential part of any package - most people won’t be willing to read your source code to figure out how your functions work. Thankfully, creating documentation for your package is incredibly easy with <code>Roxygen2</code>.</p>
<div id="documenting-functions" class="section level3" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Documenting Functions</h3>
<p>(Note: here, we describe how to document functions. For a more detailed description of how to document S3, S4, and reference classes, check out <a href="http://r-pkgs.had.co.nz/man.html">this page</a>.)</p>
<p>To understand how to use <code>Roxygen2</code>, it’s best to start with an example. Consider the following code, which generates the documentation for the <code>general_sqrt()</code> function above.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="package-development.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Generalized Square Roots</span></span>
<span id="cb35-2"><a href="package-development.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb35-3"><a href="package-development.html#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; \code{general_sqrt} returns the square root of any real number</span></span>
<span id="cb35-4"><a href="package-development.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb35-5"><a href="package-development.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param x A real number - integers or doubles are both acceptable.</span></span>
<span id="cb35-6"><a href="package-development.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return A complex value. If x is positive, the imaginary component is equal to 0;</span></span>
<span id="cb35-7"><a href="package-development.html#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; if x is negative, the real component is equal to 0.</span></span>
<span id="cb35-8"><a href="package-development.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb35-9"><a href="package-development.html#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb35-10"><a href="package-development.html#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; general_sqrt(10)</span></span>
<span id="cb35-11"><a href="package-development.html#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; general_sqrt(-10)</span></span>
<span id="cb35-12"><a href="package-development.html#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; general_sqrt(-1)</span></span>
<span id="cb35-13"><a href="package-development.html#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb35-14"><a href="package-development.html#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb35-15"><a href="package-development.html#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co"># This function takes the complex square root of real numbers</span></span>
<span id="cb35-16"><a href="package-development.html#cb35-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-17"><a href="package-development.html#cb35-17" aria-hidden="true" tabindex="-1"></a>general_sqrt <span class="ot">&lt;-</span> <span class="cf">function</span> (x) {</span>
<span id="cb35-18"><a href="package-development.html#cb35-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-19"><a href="package-development.html#cb35-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return the normal square root if x &gt; 0</span></span>
<span id="cb35-20"><a href="package-development.html#cb35-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">||</span> x <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb35-21"><a href="package-development.html#cb35-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">complex</span>(<span class="at">real=</span><span class="fu">sqrt</span>(x), <span class="at">imaginary=</span><span class="dv">0</span>))</span>
<span id="cb35-22"><a href="package-development.html#cb35-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-23"><a href="package-development.html#cb35-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-24"><a href="package-development.html#cb35-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Else return the complex square root</span></span>
<span id="cb35-25"><a href="package-development.html#cb35-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-26"><a href="package-development.html#cb35-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb35-27"><a href="package-development.html#cb35-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">complex</span>(<span class="at">real =</span> <span class="dv">0</span>, <span class="at">imaginary =</span> <span class="fu">sqrt</span>(<span class="sc">-</span>x)))</span>
<span id="cb35-28"><a href="package-development.html#cb35-28" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-29"><a href="package-development.html#cb35-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-30"><a href="package-development.html#cb35-30" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="images/packageSS/gensqrtdoc.PNG" /></p>
<p>Inside the R script, the documentation appears right above the definition of the function - this is helpful because it will help you remember to keep your documentations/functions up to date with each other. Let’s work through how this documentation was generated.</p>
<ol style="list-style-type: decimal">
<li><p>Note that everything you write in <code>Roxygen2</code> should be preceded by a #’ character combo. This signals to the R environment that you’re writing documentation, not code.</p></li>
<li><p>You should start your documentation with a very short (2-4 word) title of the function. In the example given above, the <code>general_sqrt()</code> function is titled “Generalized Square Roots.”</p></li>
<li><p>You should describe your functions’ parameters using the ‘<span class="citation">@param</span>’ signifier. This should succinctly describe the type (i.e. double, integer, character) of the parameter, as well as its function, as well as any potential default value.</p></li>
<li><p>You should document the type of output your function returns. Is it an integer, a dataframe, a matrix? Does it depend on the input? Your documentation should answer these questions!</p></li>
<li><p>You <em>must</em> provide examples of your function’s use. These are pretty critical, because a lot of programmers will just skip straight to the examples (and only look at the rest of the documentation if the examples are unclear).</p></li>
<li><p>You may choose to write ‘<span class="citation">@export</span>’ at the end of your documentation block. You should only do this if you want other people to use the function that you’re exporting, because exporting it will make sure it shows up in the <strong>namespace</strong>, a document that makes sure your package works in combination with other packages. For example, if your package includes data labelled ‘lm’, the namespace will prevent errors when using that data in combination with the R stats package (which has a function called ‘lm’) and will <em>not</em> throw an error. The <a href="http://r-pkgs.had.co.nz/namespace.html">exact mechanics of the namespace</a> are slightly beyond the scope of this guide, but thankfully <code>Roxygen2</code> will automatically generate a namespace for you when you create documentation with “<span class="citation">@export</span>” tags.</p></li>
</ol>
<p>Note that most functions you write won’t be exported - for example, if you write a helper function like <code>loss()</code> which is only used in service of a larger function, it shouldn’t be exported (exporting too many functions ‘clutters’ the namespace).</p>
<p>Once you’ve written all your documentation, it’s fairly simple to check what it looks like. Simply run the following function:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="package-development.html#cb36-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()</span></code></pre></div>
<p>which will automatically generate your documentation. Then, if you’ve documented a function, you can type <code>?function-name</code> into the console, and the documentation should automatically pop up!</p>
<p>After documenting your package, you can also click the ‘/man’ folder to inspect the documentation html files <code>Roxygen2</code> generates, but it probably won’t be more informative than simply typing <code>?function-name</code> into the console.</p>
</div>
<div id="adding-a-readme" class="section level3" number="1.7.2">
<h3><span class="header-section-number">1.7.2</span> Adding a README</h3>
<p>The README file is a bit different than the others, because your package will actually work fine even if you don’t have one. However, if you want other people to use your package, it’s best to have a README. The purpose of a README is basically to bridge the gap between the DESCRIPTION and the actual documentation in your package. In other words, someone using your package might know what it does in a general sense from your DESCRIPTION, but they won’t necessarily know exactly how to set up the package or how to use specific functions. The README takes care of that. In general, READMEs should do at least two things, with a couple of optional ones:</p>
<p>(Important):</p>
<ol style="list-style-type: decimal">
<li>Offer a longer (one to three paragraph) description of the package, including core functions and bits and pieces of syntax</li>
<li>Help users install and set up the package</li>
</ol>
<p>(Optional from here on):</p>
<ol start="3" style="list-style-type: decimal">
<li>Tell developers what to do if they want to contribute to your package</li>
<li>Help contributors figure out how to run the packages’ unit tests (we’ll talk more about unit tests in the next section)</li>
<li>Offer some acknowledgements</li>
</ol>
<p>This <a href="https://gist.github.com/PurpleBooth/109311bb0361f32d87a2">template</a> README is a good starting point. You could copy this file into your package directory and modify it to reflect the content of your project. Again, because your package will technically function without your README, the actual structure and content of a README can be flexible. However, just remember that if you don’t have a README which outlines why and how to use your package, other developers are unlikely to want to use it.</p>
</div>
</div>
<div id="vignettes" class="section level2" number="1.8">
<h2><span class="header-section-number">1.8</span> Vignettes</h2>
<p>Documentation is useful, but not necessarily a comprehensive guide to your package. You may want to include details about your implementation, extra examples, and more organization than your documentation provides, which is exactly what vignettes are for.</p>
<p><strong>Vignettes</strong> are basically articles which motivate and describe your packages. They are generally written in RMarkdown, which allows you to mix code, mathematical equations, and formatted text with ease. If you are using RStudio, then writing vignettes will be very easy, because RMarkdown works automatically with RStudio. On the other hand, if you don’t have RStudio, you will need to (i) run the ‘install.packages(“rmarkdown”)’ command, and (ii) install <a href="http://pandoc.org/installing.html">pandoc</a>.</p>
<p>To write a vignette, start by running the <code>use_vignette()</code> function from the <code>usethis</code> package:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="package-development.html#cb37-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_vignette</span>(<span class="st">&#39;vignette-name&#39;</span>)</span></code></pre></div>
<p>This function will create a ‘vignettes’ subdirectory and populate it with a file based on the name you specified. The file should look something like this:</p>
<p><img src="images/packageSS/vignette1.PNG" /></p>
<p>The top of the file, between the two lines of dashes, is written in the YAML language. It’s simply a convenient way to specify metadata about a vignette, and you should fill in the title and author fields.</p>
<p>The rest of the vignette should be written in RMarkdown, which is basically a mix of Markdown, Latex, or code. The vignette template generated by <code>usethis</code> <em>is itself a guide to using RMarkdown</em>, so we won’t dive too deep into using RMarkdown. However, there are a couple of core things you should know:</p>
<ol style="list-style-type: decimal">
<li>By default, text in RMarkdown files is assumed to be written in <a href="http://pandoc.org/MANUAL.html">pandoc’s flavor of Markdown</a>.</li>
<li>If you would like to include inline equations, you can do so by surrounding math symbols with a single dollar sign on each end. If you’d like to give an equation its own line, you can use two dollar signs on each end of the equations.</li>
</ol>
<div class="figure">
<img src="images/packageSS/vignettemath.PNG" alt="" />
<p class="caption"><em>Including math is easy in RMarkdown</em></p>
</div>
<ol start="3" style="list-style-type: decimal">
<li>You can add chunks of R code (and even other languages!) to your Vignette file by wrapping R code in “```” symbols, as demonstrated below:</li>
</ol>
<p><img src="images/packageSS/vignettecode.PNG" /></p>
<p>Once you’ve modified your vignette, you can <em>knit</em> it into a beautiful HTML document by running the following function in the console:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="package-development.html#cb38-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="st">&#39;path/to/rmarkdown/file.Rmd&#39;</span>)</span></code></pre></div>
<p>If you do choose to write vignettes, remember that it’s critical to motivate <em>why</em> you wrote your package in the first place. Additionally, you should structure the vignette so that it gives users an impression of the overarching structure of the package itself (i.e. group and organize your functions!).</p>
</div>
<div id="adding-and-documenting-data" class="section level2" number="1.9">
<h2><span class="header-section-number">1.9</span> Adding and Documenting Data</h2>
<p>Sometimes, you’ll want to include data as part of your package, either to serve as an example for users or because your functions need it to work. This is totally optional - not all packages need to include data - but can be useful, so let’s walk through how to include (and document) data in your package. Note that there are at least two kinds of data you should think about including, but for both kinds of data, you should generally save them as ‘.rdata’ or ‘.rda’ files (which are the same thing).</p>
<div id="including-data-which-should-be-available-to-users" class="section level3" number="1.9.1">
<h3><span class="header-section-number">1.9.1</span> Including data which should be available to users</h3>
<p>All of the data you want to be available to users should be saved in a folder called ‘data’ inside your project. The way to do this is to write and run a script which loads your data into R and then uses the <code>usethis</code> function <code>use_data()</code> to save it to a path inside ‘data’. Even if you do not already have a folder called ‘data’ in your package, the <code>use_data()</code> function will make it for you. Note that for this to work, your working directory must be set to the package you’re writing, otherwise <code>usethis</code> won’t know where to put your data.</p>
<p>For example, when documenting the <code>scalep()</code> function, one might want to include data as an example of a way to use <code>scalep()</code>. To this end, we can use the built-in R dataset <code>mtcars</code> and include it in the package.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="package-development.html#cb39-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_data</span>(mtcars)</span></code></pre></div>
<p>In this way, you can include in your package any data you want, providing it has been stored in an R object. Data in your ‘data’ folder will effectively always be exported, so you always must document it. To document data, you should create an R Script in your ‘R’ directory called [‘data.R’] and use <code>Roxygen2</code> to document the data similarly to the way you’d document a function. For example, one might document the aforementioned data in the following way:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="package-development.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Motor trend car road tests dataset</span></span>
<span id="cb40-2"><a href="package-development.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb40-3"><a href="package-development.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; This dataset lists the properties of 32 motorcars</span></span>
<span id="cb40-4"><a href="package-development.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb40-5"><a href="package-development.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @format A dataframe with 32 rows and 11 columns.</span></span>
<span id="cb40-6"><a href="package-development.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; \describe{</span></span>
<span id="cb40-7"><a href="package-development.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{mpg}{Mile per gallon}</span></span>
<span id="cb40-8"><a href="package-development.html#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{cyl}{Number of cylinders}</span></span>
<span id="cb40-9"><a href="package-development.html#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{disp}{Displacement (cu.in)}</span></span>
<span id="cb40-10"><a href="package-development.html#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{hp}{Gross horsepower}</span></span>
<span id="cb40-11"><a href="package-development.html#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{drat}{Rear axle ratio}</span></span>
<span id="cb40-12"><a href="package-development.html#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{wt}{Weight (1000 lbs)}</span></span>
<span id="cb40-13"><a href="package-development.html#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{qsec}{1/4 mile time}</span></span>
<span id="cb40-14"><a href="package-development.html#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{vs}{Engine: (0 = V-shaped, 1 = straight)}</span></span>
<span id="cb40-15"><a href="package-development.html#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{am}{Transmission: (0 = automatic, 1 = manual)}</span></span>
<span id="cb40-16"><a href="package-development.html#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{gear}{Number of forward gears}</span></span>
<span id="cb40-17"><a href="package-development.html#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;   \item{carb}{Number of carburetors}</span></span>
<span id="cb40-18"><a href="package-development.html#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;}</span></span>
<span id="cb40-19"><a href="package-development.html#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @source This dataset is a built-in R dataset and is</span></span>
<span id="cb40-20"><a href="package-development.html#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; intended only to be used as an example for package development.</span></span>
<span id="cb40-21"><a href="package-development.html#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;mtcars&quot;</span></span></code></pre></div>
<p>This should all look pretty similar to documenting functions. Note that ‘<span class="citation">@format</span>’ is a tag which will allow you to describe the structure of a dataset, and it’s good practice to list what each column measures in this section. The ‘<span class="citation">@source</span>’ section describes where the data came from. Never write ‘<span class="citation">@export</span>’ in this section, as data here is already automatically exported.</p>
</div>
<div id="including-data-for-your-functions" class="section level3" number="1.9.2">
<h3><span class="header-section-number">1.9.2</span> Including data for your functions</h3>
<p>Some functions may rely on a large, predefined set of coefficients or other inputs which need to be included in the package. However, users shouldn’t generally have access to such data because otherwise they might accidentally radically change the way your function works. It’s best to put such data in ‘R/sysdata.rda’, because then users won’t easily be able to access and accidentally modify it. As before, the way to include data in this way is to write a script which loads the data into R and then use the <code>use_data()</code> function to save it, but you should also include a parameter <code>internal = TRUE</code> in the function call to let R know that this is interior, not exterior, data. For example, if a function depends on a matrix called “coefficients”, one might run the following code:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="package-development.html#cb41-1" aria-hidden="true" tabindex="-1"></a>coefficients <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Users/name/Documents/R/coefs.csv&#39;</span>)</span>
<span id="cb41-2"><a href="package-development.html#cb41-2" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_data</span>(coefficients, <span class="at">internal =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Data in ‘R/sysdata.rda’ is never exported, so there’s no need to document it.</p>
</div>
</div>
<div id="releasing-your-package" class="section level2" number="1.10">
<h2><span class="header-section-number">1.10</span> Releasing Your Package</h2>
<p>You’re almost done at this point! You’ve written your functions, modified the description, documented your functions, presumably exported some of them, and hopefully tested all of them; you’re now ready to <em>release</em> and <em>publicize</em> your package. There are basically two main ways to do this.</p>
<div id="pushing-to-github" class="section level3" number="1.10.1">
<h3><span class="header-section-number">1.10.1</span> Pushing to GitHub</h3>
<p>The easiest way to publish your package is to simply <a href=".\version-control">push it to GitHub</a>, (we’ll discuss how to do this later). The pros of this approach are that it makes it very easy for users to download your package - they can literally do it in one line. Additionally, Github offers free services <a href="https://pages.github.com/">to host a website for your package and its documentation</a>, and most importantly, it’s very easy for <strong>you</strong> to publish your package this way. Thus, pushing to Github is sort of the “default” way to publish a smaller package.</p>
</div>
<div id="cran" class="section level3" number="1.10.2">
<h3><span class="header-section-number">1.10.2</span> CRAN</h3>
<p>On the other hand, if you’ve written a larger package which you would like to distribute to the entire R community, you might consider submitting it to <a href="https://cran.r-project.org/">CRAN</a>, the Comprehensive R Archive Network. CRAN is basically the official package authority designated by the R community, and successfully adding your package to CRAN will make it more legitimate as well as easier for R users to find and install.</p>
<p>Logistically, submitting your package to CRAN is pretty simple. The first step is to <strong>build</strong> your package, which means bundling it into a format that is easy to distribute and easy for users to install.</p>
<p>The best way to build your package is to zip it as a .tar.gz file. <code>devtools</code> will do this for you if you run the following command:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="package-development.html#cb42-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>(<span class="at">binary =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>and then you should see a tar.gz file pop up just outside your working directory.</p>
<p>The next step is to submit the bundled file to CRAN <a href="https://cran.r-project.org/submit.html">at the link here</a>, along with a couple of comments. Although this seems pretty simple, in actuality, CRAN has very high standards for packages, so it can be rather tricky to get a package accepted. CRAN’s specific standards are beyond the scope of the current iteration of this guide, but if you decide you want to publish a package on CRAN, you should read <a href="http://r-pkgs.had.co.nz/release.html">Hadley Wickham’s advice on the subject</a> <strong>very carefully.</strong></p>
<div id="optional-building-precompiled-binaries" class="section level4" number="1.10.2.1">
<h4><span class="header-section-number">1.10.2.1</span> Optional: Building precompiled binaries</h4>
<p>tar.gz files are useful because anyone who has a working R development environment can install and unzip your package, regardless of their operating system. However, you do need a development environment to install packages built as tar.gz files, and some users (in particular on Windows) may not have development environments set up yet. To address this potential issue, another way to build your package is as a <strong>precompiled binary file</strong>. Precompiled binaries are useful because unlike tar.gz files, they do not require a development environment to install. However, they are platform specific: a precompiled binary built by a Windows machine can’t be installed on Mac machine. Although tar.gz files are much more common, if you do want to build a binary, you can just change an argument of <code>devtools::build()</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="package-development.html#cb43-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>(<span class="at">binary =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>and your precompiled binary will be built.</p>
</div>
</div>
<div id="publicizing" class="section level3" number="1.10.3">
<h3><span class="header-section-number">1.10.3</span> Publicizing</h3>
<p>Once you’ve released your package either on Github or perhaps on CRAN, you should publicize it! You can of course publicize it any way you choose, but there are at least two things you should consider doing.</p>
<ol style="list-style-type: decimal">
<li>Tweet about your package using the #rstats hashtag, which reaches a substantial portion of the R community.</li>
<li>You may also want to send an email out to the <a href="https://stat.ethz.ch/mailman/listinfo/r-packages">R-Packages email list</a>.</li>
</ol>
<p>And that’s it!</p>
</div>
</div>
<div id="tips-and-tricks-1" class="section level2" number="1.11">
<h2><span class="header-section-number">1.11</span> Tips and Tricks</h2>
<p>First, there’s a wonderful cheat sheet for package development linked <a href="https://www.rstudio.com/wp-content/uploads/2015/06/devtools-cheatsheet.pdf">here</a>.</p>
<p>Second, if you’re having trouble, you can always just reference <a href="https://stackoverflow.com/questions/tagged/r">stackoverflow</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="version-control.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/IQSS/dss-rbuild/edit/master/01_package_development.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Rbuild.pdf", "Rbuild.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
